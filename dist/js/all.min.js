function modalInput(){return"Res želite izprazniti košarico?"}angular.module("app",["ui.router","ngResource","ui.bootstrap","angular-locker","ngAnimate"]),angular.module("app").config(["lockerProvider",function(t){t.defaults({driver:"local",mespace:"app"})}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,r){r.otherwise("/"),t.state("index",{url:"/",templateUrl:"/templates/home.index.html"}),t.state("prva",{url:"/prva",template:"<h1>Prva stran</h1>"}),t.state("druga",{url:"/druga",template:"<h1>Druga stran</h1>"}),t.state("error",{url:"/error",template:"<h2>Page Not Found Error 404 </h2>"}),t.state("about",{url:"/about",templateUrl:"/templates/about-template.html"}),t.state("terms",{url:"/terms",templateUrl:"/templates/terms.template.html"}),t.state("productDetails",{url:"/products/:productId",templateUrl:"/templates/product-details.template.html",controllerAs:"ProductDetailCtrl",controller:"ProductDetailsController"}),t.state("products",{url:"/products",templateUrl:"/templates/products.template.html",controllerAs:"ProductsCtrl",controller:"ProductsController"}),t.state("cart",{url:"/cart",templateUrl:"/templates/cart.template.html",controllerAs:"CartCtrl",controller:"CartController"}),t.state("categoryProducts",{url:"/categories/:categoryId/products",params:{categoryData:null},templateUrl:"templates/category-products.template.html",controllerAs:"CategoriesCtrl",controller:"CategoriesController"}),t.state("orderComplete",{url:"/cart/order/order-complete",params:{data:null},templateUrl:"/templates/order-complete.template.html",controllerAs:"OrderCtrl",controller:"OrderController"})}]),angular.module("app").directive("addToCartDirective",function(){return{restrict:"E",scope:{id:"="},templateUrl:"/templates/add-to-cart.template.html",controller:"CartController",controllerAs:"CartCtrl"}}),angular.module("app").factory("CartItemsFactory",["locker",function(t){var r=t.get("myCart",[]);return{items:r}}]),angular.module("app").controller("CartController",["CartItemsFactory","ProductsFactory","locker","$state",function(t,r,e,o){var a=this;a.show=!1,a.items=t.items,a.products=r.query({}),a.totalItems=0,a.quantity=1;var l=0,n={};a.addToCart=function(t){n=t,l=a.quantity*t.price,a.items.push({product:n,quantity:a.quantity,total:l}),e.put("myCart",a.items)};var c=0;for(item in a.items)c=c+=a.items[item].total,a.totalItems=a.totalItems+a.items[item].quantity;a.cartTotal=c,a.removeItem=function(t){var r=a.items.indexOf(t);a.items.splice(r,1),o.reload()}}]),angular.module("app").controller("CategoriesController",["CategoriesFactory","$stateParams","CategoryProductsFactory","$state",function(t,r,e,o){var a=this;a.categories=t.query({}),a.loading=!0,a.categoryItems=e.query({id:r.categoryId},function(t){a.loading=!1}),a.thisCategory=o.params.categoryData,console.log("asdf")}]),angular.module("app").directive("categoriesDirective",function(){return{restrict:"E",scope:{},templateUrl:"/templates/categories-list.template.html",controllerAs:"CategoriesCtrl",controller:"CategoriesController"}}),angular.module("app").factory("CategoriesFactory",["$resource","$cacheFactory",function(t,r){return t("http://smartninja.betoo.si/api/eshop/categories")}]),angular.module("app").factory("CategoryProductsFactory",["$resource",function(t){return t("http://smartninja.betoo.si/api/eshop/categories/:id/products")}]),angular.module("app").controller("HomeDirectiveController",["ProductsFactory",function(t){var r=this;r.interval=3e3,r.productsOnSale=t.query({onlyOnSale:!0})}]),angular.module("app").directive("homeDirective",function(){return{scope:{},restrict:"E",templateUrl:"/templates/home.template.html",controllerAs:"HomeDirCtrl",controller:"HomeDirectiveController"}}),angular.module("app").controller("OrderController",["CartItemsFactory","OrdersFactory","$state","locker",function(t,r,e,o){var a=this;a.products=t.items,a.orderDetails=o.get("orderDetails",[]);var l=[];for(item in a.products)l.push({id:a.products[item].product.id,quantity:a.products[item].quantity});a.orderUP=function(t,n,c,s,i,u,p,d){var m=new r({firstName:t,lastName:n,email:c,address:s,zip:i,city:u,country:p,products:l,message:d});o.put("orderDetails",m),m.$save(function(t){a.msg={msg:t.status},e.go("orderComplete",{data:a.msg}),console.log(a.msg)})},a.resData=e.params.data,a.orderComplete=function(){return o.forget("myCart"),o.forget("orderDetails"),e.go("index"),window.location.reload()}}]),angular.module("app").directive("orderDirective",function(){return{restrict:"E",scope:{},templateUrl:"/templates/order-form.template.html",controllerAs:"OrderCtrl",controller:"OrderController"}}),angular.module("app").factory("OrdersFactory",["$resource",function(t){return t("http://smartninja.betoo.si/api/eshop/orders")}]),angular.module("app").controller("ProductDetailsController",["ProductsFactory","$stateParams",function(t,r){var e=this;e.product=t.get({id:r.productId})}]),angular.module("app").controller("ProductsController",["$scope","ProductsFactory",function(t,r){var e=this;e.loading=!0,t.$watch("ProductsCtrl.query",function(t){e.products=r.query({query:t})}),e.products=r.query({},function(t){e.loading=!1})}]),angular.module("app").factory("ProductsFactory",["$resource","$cacheFactory",function(t,r){return t("http://smartninja.betoo.si/api/eshop/products/:id",{},{query:{isArray:!0}})}]),angular.module("app").directive("userDirective",function(){return{restrict:"E",templateUrl:"/templates/user.template.html"}}),angular.module("app").controller("UsersController",["$scope",function(t){}]),angular.module("app").controller("MainNavigationController",["$http","ProductsFactory","$state","CartItemsFactory","CategoriesFactory",function(t,r,e,o,a){var l=this;l.isNavCollapsed=!0,l.isCollapsed=!1,l.selected="",l.products=r.query({}),l.getItems=function(r){return t.get("http://smartninja.betoo.si/api/eshop/products",{params:{query:r}}).then(function(t){return t.data})},l.getProductDetails=function(t){e.go("productDetails",{productId:t.id})},l.items=o.items,l.categories=a.query({})}]),angular.module("app").directive("navigationDirective",function(){return{restrict:"E",scope:!0,templateUrl:"/templates/navigation-template.html",controllerAs:"MainNavCtrl",controller:"MainNavigationController"}}),angular.module("app").controller("ClearCartController",["$uibModal","locker",function(t,r){var e=this;e.openModal=function(){var e=t.open({templateUrl:"/templates/clear-cart-modal.template.html",controllerAs:"ClearModalCtrl",controller:"ClearCartModalController",resolve:{input:modalInput}});e.result.then(function(t){return r.forget("myCart"),window.location.reload()})}}]),angular.module("app").controller("ClearCartModalController",["$uibModalInstance","input",function(t,r){var e=this;e.data=r,e.ok=function(){t.close("Success")},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("app").directive("clearCart",function(){return{restrict:"E",controllerAs:"ClearCartCtrl",controller:"ClearCartController",template:'<button class="btn btn-danger" ng-click="ClearCartCtrl.openModal()">Izprazni Košarico</button>'}}),angular.module("app").directive("onSaleDirective",function(){return{restrict:"E",scope:!0,templateUrl:"/templates/on-sale.template.html",controllerAs:"OnSaleCtrl",controller:"OnSaleProductsController"}}),angular.module("app").controller("OnSaleProductsController",["ProductsFactory",function(t){var r=this;r.loading=!0,r.products=t.query({onlyOnSale:!0},function(t){r.loading=!1})}]);